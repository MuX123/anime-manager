<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <!-- å®‰å…¨æ€§å¼·åŒ– Head -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="X-Frame-Options" content="SAMEORIGIN">
    <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">
    <meta http-equiv="Permissions-Policy" content="geolocation=(), microphone=(), camera=()">
    <meta name="referrer" content="strict-origin-when-cross-origin">
    <meta name="theme-color" content="#050609">
    <title>ACG æ”¶è—åº«</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Space+Mono:wght@400;700&family=Noto+Sans+TC:wght@400;700&display=swap"
        rel="stylesheet">

    <!-- CSS æ¨¡çµ„åŒ–çµæ§‹ -->
    <link rel="stylesheet" href="./css/variables.css?v=20260213_v9">
    <link rel="stylesheet" href="./css/base.css?v=20260213_v9">
    <link rel="stylesheet" href="./css/layout.css?v=20260213_v9">
    <link rel="stylesheet" href="./css/components.css?v=20260213_v9">
    <link rel="stylesheet" href="./css/animations.css?v=20260215_fix_v3">
    <link rel="stylesheet" href="./css/responsive.css?v=20260213_v9">
    <!-- è©³æƒ…é æ¨£å¼ (åƒ… Modal ä½¿ç”¨) -->
    <link rel="stylesheet" href="./css/detail-cyberpunk.css?v=20260215_v18">
    <!-- çŸ©é™£é›¨èƒŒæ™¯ -->
    <link rel="stylesheet" href="./css/matrix-rain.css?v=20260215_fix_v3">
    <!-- æ¸²æŸ“ç³»çµ±æ¨£å¼ (å¡ç‰‡ã€å¾½ç« ) - æœ€å¾Œè¼‰å…¥ä»¥ç¢ºä¿å„ªå…ˆæ¬Š -->
    <link rel="stylesheet" href="./css/render.css?v=20260214_opt_v1">
    <link rel="stylesheet" href="./css/loader.css?v=20260213_v1">
    <link rel="stylesheet" href="./css/restore_menu.css">
    <!-- é—œéµæ¸²æŸ“è·¯å¾‘æ¨£å¼ -->
    <style>
        #loading-screen {
            position: fixed !important;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: #050609;
            z-index: 999999;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .modal {
            position: fixed !important;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 99999;
            display: none;
        }

        #toast {
            position: fixed !important;
            bottom: 30px;
            left: 30px;
            z-index: 100000;
            pointer-events: none;
            opacity: 0;
        }
    </style>
</head>

<body>
    <!-- é§­å®¢ä»»å‹™æ•¸ç¢¼é›¨èƒŒæ™¯ - åœ¨ scaling å®¹å™¨å¤–é¢ -->
    <canvas id="c"></canvas>

    <!-- ACG äº’å‹•æ°›åœå±¤ -->
    <div id="atmosphere-container">
        <div class="atmosphere-grid"></div>
        <div class="atmosphere-glow"></div>
        <div class="atmosphere-tech-overlay"></div>
    </div>

    <!-- åŠ è¼‰ç•«é¢ (ç§»å‡º site-scaler ä»¥é¿å…ç¸®æ”¾å½±éŸ¿ä¸¦ç¢ºä¿ç½®é ‚) -->
    <!-- åŠ è¼‰ç•«é¢ (Gate Animation v8.0 Original) -->
    <div id="loading-screen">
        <div class="gas-steam gas-left"></div>
        <div class="gas-steam gas-right"></div>

        <!-- Left Gate -->
        <div class="gate-left">
            <div class="grid-overlay"></div>
            <!-- V16 High-Fidelity SVG Circuits -->
            <svg class="gate-pattern" viewBox="0 0 1000 1000" preserveAspectRatio="xMidYMid slice">
                <defs>
                    <linearGradient id="circuitGradLeft" x1="100%" y1="0%" x2="0%" y2="100%">
                        <stop offset="0%" style="stop-color:#00ffff;stop-opacity:0.9" />
                        <stop offset="50%" style="stop-color:#0080ff;stop-opacity:0.7" />
                        <stop offset="100%" style="stop-color:#8000ff;stop-opacity:0.5" />
                    </linearGradient>
                </defs>
                <path class="line-breathe" d="M1000,100 H700 L680,120 H500 L480,100 H300 L270,130 H0"
                    stroke="url(#circuitGradLeft)" stroke-width="3" fill="none" />
                <path class="line-breathe-delay" d="M1000,300 H750 L730,280 H550 L530,300 H350 L330,280 H0"
                    stroke="url(#circuitGradLeft)" stroke-width="3" fill="none" />
                <path class="line-breathe"
                    d="M1000,500 H880 L860,520 H680 L660,500 H480 L460,520 H280 L260,500 H80 L60,520 H0"
                    stroke="url(#circuitGradLeft)" stroke-width="3" fill="none" />
                <path class="line-breathe-slow" d="M1000,150 H800 L780,170 H620 L600,150 H420 L400,170 H200 L180,150 H0"
                    stroke="url(#circuitGradLeft)" stroke-width="2" fill="none" />
                <path class="line-breathe" d="M900,0 V200 L880,220 V400 L900,420 V600 L880,650 V1000"
                    stroke="url(#circuitGradLeft)" stroke-width="3" fill="none" />
                <path class="line-breathe-delay"
                    d="M700,0 V250 L720,270 V450 L700,470 V650 L720,670 V850 L700,900 V1000"
                    stroke="url(#circuitGradLeft)" stroke-width="3" fill="none" />
            </svg>

            <div class="gate-beam"></div>
            <div class="gate-bolt t-1"></div>
            <div class="gate-bolt b-1"></div>
            <div class="mech-detail-1"></div>

            <!-- Masterpiece Armored Lock -->
            <div class="lock-plate left">
                <svg class="gate-pattern" viewBox="0 0 300 600" preserveAspectRatio="none">
                    <path class="line-breathe-delay" d="M300,50 H100 L80,70 H0" stroke="url(#circuitGradLeft)"
                        stroke-width="2" fill="none" />
                    <path class="line-breathe-slow" d="M300,300 H150 L130,280 H0" stroke="url(#circuitGradLeft)"
                        stroke-width="2" fill="none" />
                    <path class="line-breathe" d="M300,550 H120 L100,530 H0" stroke="url(#circuitGradLeft)"
                        stroke-width="2" fill="none" />
                </svg>
                <div class="lock-armor-frame"></div>
                <div class="lock-bolts">
                    <div class="bolt bolt-1"></div>
                    <div class="bolt bolt-2"></div>
                    <div class="bolt bolt-3"></div>
                </div>
            </div>
        </div>

        <!-- Right Gate -->
        <div class="gate-right">
            <div class="grid-overlay"></div>
            <!-- V16 High-Fidelity SVG Circuits -->
            <svg class="gate-pattern" viewBox="0 0 1000 1000" preserveAspectRatio="xMidYMid slice">
                <defs>
                    <linearGradient id="circuitGradRight" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#00ffff;stop-opacity:0.9" />
                        <stop offset="50%" style="stop-color:#0080ff;stop-opacity:0.7" />
                        <stop offset="100%" style="stop-color:#8000ff;stop-opacity:0.5" />
                    </linearGradient>
                </defs>
                <path class="line-breathe" d="M0,100 H300 L320,120 H500 L520,100 H700 L730,130 H1000"
                    stroke="url(#circuitGradRight)" stroke-width="3" fill="none" />
                <path class="line-breathe-delay" d="M0,300 H250 L270,280 H450 L470,300 H650 L670,280 H1000"
                    stroke="url(#circuitGradRight)" stroke-width="3" fill="none" />
                <path class="line-breathe"
                    d="M0,500 H120 L140,520 H320 L340,500 H520 L540,520 H720 L740,500 H920 L940,520 H1000"
                    stroke="url(#circuitGradRight)" stroke-width="3" fill="none" />
                <path class="line-breathe-slow" d="M0,150 H200 L220,170 H380 L400,150 H580 L600,170 H800 L820,150 H1000"
                    stroke="url(#circuitGradRight)" stroke-width="2" fill="none" />
                <path class="line-breathe" d="M100,0 V200 L120,220 V400 L100,420 V600 L120,650 V1000"
                    stroke="url(#circuitGradRight)" stroke-width="3" fill="none" />
                <path class="line-breathe-delay"
                    d="M300,0 V250 L280,270 V450 L300,470 V650 L280,670 V850 L300,900 V1000"
                    stroke="url(#circuitGradRight)" stroke-width="3" fill="none" />
            </svg>

            <div class="gate-beam"></div>
            <div class="gate-bolt t-1"></div>
            <div class="gate-bolt b-1"></div>
            <div class="mech-detail-1"></div>

            <!-- Masterpiece Armored Lock -->
            <div class="lock-plate right">
                <svg class="gate-pattern" viewBox="0 0 300 600" preserveAspectRatio="none">
                    <path class="line-breathe-delay" d="M0,50 H200 L220,70 H300" stroke="url(#circuitGradRight)"
                        stroke-width="2" fill="none" />
                    <path class="line-breathe-slow" d="M0,300 H150 L170,280 H300" stroke="url(#circuitGradRight)"
                        stroke-width="2" fill="none" />
                    <path class="line-breathe" d="M0,550 H180 L200,530 H300" stroke="url(#circuitGradRight)"
                        stroke-width="2" fill="none" />
                </svg>
                <div class="lock-armor-frame"></div>
                <div class="lock-bolts">
                    <div class="bolt bolt-1"></div>
                    <div class="bolt bolt-2"></div>
                    <div class="bolt bolt-3"></div>
                </div>
            </div>
        </div>

        <!-- Center Hub & UI -->
        <div class="center-hub-wrapper">
            <div class="center-gas"></div>
            <div class="circuit-burst"></div>
            <div class="rotating-hub">
                <div class="hub-aura"></div>
                <div class="lock-core-spinner">
                    <div class="core-ring outer"></div>
                    <div class="core-ring inner"></div>
                </div>
            </div>

            <div class="center-ui-container">
                <div class="loading-title">ACG æ”¶è—åº«</div>
                <div class="loading-status" id="loading-status">
                    ç³»çµ±åˆå§‹åŒ–ä¸­<span class="status-cursor">_</span>
                </div>
                <div class="progress-container">
                    <div class="progress-bar-frame">
                        <div class="progress-bar-fill" id="progress-bar-fill"></div>
                        <div class="progress-scan-line"></div>
                    </div>
                    <div class="progress-text"><span id="progress-percent">0</span>%</div>
                </div>
                <div class="loading-subtitle">V8.0 ORIGINAL EDITION</div>
            </div>
        </div>
    </div>

    <div class="site-scaler">

        <div class="site-header">
            <div id="adminHeaderBar" class="admin-header-bar"></div>
        </div>

        <div class="analytics-bar">
            <div id="analytics-display">
                <span style="margin-right: 8px;">ğŸ‘¤ <span
                        style="display: inline-block; min-width: 40px; text-align: left;">--</span></span>
                <span style="margin-right: 8px;">ğŸ–±ï¸ <span
                        style="display: inline-block; min-width: 40px; text-align: left;">--</span></span>
                <span>ğŸ“„ <span style="display: inline-block; min-width: 40px; text-align: left;">--</span></span>
            </div>
            <div class="marquee-container">
                <div id="top-marquee-content" class="marquee-content"></div>
            </div>
        </div>

        <div id="app" class="site-content-blur"></div>

        <!-- è©³æƒ…å½ˆçª— (Detail Modal) -->
        <div id="detailModal" class="modal">
            <div class="modal-content">
                <span class="close-btn" onclick="window.closeAnimeDetail()">&times;</span>
                <div id="detailContent"></div>
            </div>
        </div>

        <div id="toast" class="toast"></div>

    </div> <!-- site-scaler çµæŸ -->

    <!-- å³å´ç³»çµ±é¸å–® (Compact) - åœ¨ site-scaler å¤–é¢ï¼Œè·Ÿéš¨è¦–çª—é‚Šç•Œ -->
    <div id="systemMenu" class="system-menu active">
        <!-- æ¿å¡Šé¸æ“‡ä¸‹æ‹‰é¸å–® -->
        <select id="section-select" onchange="window.switchCategory(this.value)">
            <option value="notice">ğŸ“¢ å…¬å‘Šåˆ—è¡¨</option>
            <option value="anime">ğŸ¬ å‹•ç•«</option>
            <option value="manga">ğŸ“š æ¼«ç•«</option>
            <option value="movie">ğŸ¥ é›»å½±</option>
        </select>

        <!-- ä½ˆå±€ä¸‹æ‹‰é¸å–® -->
        <select id="layout-select" onchange="window.changeGridLayout(this.value)">
            <option value="5">ğŸ“ äº”æ¬„ä½ˆå±€</option>
            <option value="4">ğŸ“ å››æ¬„ä½ˆå±€</option>
            <option value="3">ğŸ“ ä¸‰æ¬„ä½ˆå±€</option>
            <option value="mobile">ğŸ“± è³‡æ–™åˆ—è¡¨</option>
        </select>

        <!-- æ’åºä¸‹æ‹‰é¸å–® -->
        <select id="sort-select" onchange="window.changeSortOrder(this.value)">
            <option value="desc">ğŸ“… æœ€æ–°ä½œå“</option>
            <option value="asc">ğŸ“… æœ€æ—©ä½œå“</option>
        </select>

        <!-- æ»‘é¼ é¢¨æ ¼ä¸‹æ‹‰é¸å–® -->
        <select id="cursor-theme-select" onchange="window.CursorManager.apply(this.value)">
            <option value="anya">ğŸ¦Š é˜¿å°¼äº</option>
            <option value="frieren">ğŸ§™â€â™€ï¸ èŠ™è‰è“®</option>
            <option value="elysia">ğŸ¦‹ æ„›è‰å¸Œé›…</option>
        </select>

        <!-- æ»‘é¼ å¤§å°æ»‘æ¡¿ -->
        <div class="cursor-size-control">
            <label for="cursor-size-slider">ğŸ” å¤§å°</label>
            <input type="range" id="cursor-size-slider" min="0.5" max="3" step="0.1" value="1"
                oninput="const v=parseFloat(this.value).toFixed(1)+'x';document.getElementById('cursor-size-value').textContent=v;window.CursorManager.setScale(this.value)">
            <span id="cursor-size-value">1.0x</span>
        </div>

        <div class="menu-divider"></div>

        <!-- ç™»å…¥/ç™»å‡ºæŒ‰éˆ• -->
        <div id="adminMenuOptions"></div>
    </div>

    <input type="file" id="importFile" style="display: none;" onchange="window.importData(event)">

    <!-- 1. é…ç½®èˆ‡æ ¸å¿ƒ (Configuration & Core) -->
    <script src="./js/github-pages-config.js?v=20260204_v1"></script>
    <script src="./js/config.js?v=20260205_v1"></script>

    <!-- 2. åŸºç¤å·¥å…·åº« (Infrastructure) -->
    <script src="./js/logger.js?v=20260205_v4"></script>
    <script src="./js/security.js?v=20260204_v2"></script>
    <script src="./js/usability.js?v=20260204_v1"></script>
    <script src="./js/performance.js?v=20260204_v1"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <!-- 3. è³‡æ–™èˆ‡é‚è¼¯å±¤ (Data & Logic) -->
    <script src="./js/supabase.js?v=20260205_v4"></script>
    <script src="./js/script.js?v=20260214_opt_v1"></script>
    <script src="./js/announcements.js?v=20260209_v5"></script>
    <script src="./js/analytics.js?v=20260202_v1"></script>

    <!-- 4. æ¸²æŸ“èˆ‡ UI å±¤ (Render & UI) -->
    <script src="./js/render.js?v=20260214_opt_v1"></script>
    <script src="./js/background-switcher.js"></script>

    <!-- 5. è¦–è¦ºç‰¹æ•ˆå±¤ (Visual Effects) -->
    <script src="./js/atmosphere.js?v=20260215_fix_v3"></script>
    <script src="./js/matrix-rain.js?v=20260215_fix_v3"></script>

    <!-- 6. èª¿è©¦èˆ‡è£œä¸ (Debug & Patches) -->
    <script src="./js/debug.js?v=20260202_v1"></script>

    <!-- å•é¡Œä¿®å¾©è£œä¸ -->
    <script src="./js/fix-recommendation.js?v=20260204_v1"></script>

    <!-- Service Worker è¨»å†Š -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                console.log('[Main] æ­£åœ¨è¨»å†Š Service Worker...');
            });
        }
    </script>
</body>

</html>